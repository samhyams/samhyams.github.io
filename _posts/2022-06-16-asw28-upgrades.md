---
title: ASW28 Upgrades
date: 2022-06-16 13:13:00 +0100
categories: [Projects, ASW28]
tags: [uas, uav, autonomous, ardupilot, arduplane]     # TAG names should always be lowercase
description: Improving the avionics of my glider with an ArduPlane makeover
toc: false
media_subpath: /asw28/
image:
  path: 20220601_201418.jpg
  alt: ASW28 ready for flight
---

My Volantex ASW28 airframe has been a very reliable slope and thermal soaring aircraft. Although I had fitted it with an iNav flight controller from the outset to benefit from optional flight stabilisation and autonomous safety features such as RTH, it was almost exclusively flown in manual modes when soaring.

After two years of flight, the airframe has picked up many scars and so I wanted to take this opportunity to freshen it up and install improvements.

First up was changing avionics by installing a Matek F405-WSE flight controller flashed with Arduplane 4.2, configured for fully autonomous flight and with autonomous soaring mode available as an option. A few additional components were added or changed to help facilitate this:

- An airspeed sensor was added on the port wing
- A 433 MHz telemetry module was added. Powered directly from the ESC BEC to reduce load on the flight controller BECs
- Wing-fuselage servo connections replaced with multiplex plugs due to the additional wiring
- Custom avionics tray to help keep wiring tidy and ease maintenance

Initial tuning flights showed a serious lack of control authority in roll which was fixed with increases to control surface throws. Further tuning in FBW modes using ArduPilot's autotune flight mode quickly led to a very responsive and easy to fly aircraft, far exceeding the handling of the old iNav configuration. Next was a short stint of tuning the TECS controllers, although only marginal gains were made here. The parameter TECS_SPDWEIGHT was set equal to 2 which sets the controller to prioritise height by throttle and airspeed by elevation angle, which is preferred for glider airframes. Stall speed was discovered by definitely not crashing on the second flight in FBWA! After tuning, the aircraft was flying on rails and was reasonably efficient at a cruise speed of 10 m/s.

Including the 433 MHz telemetry module had exposed some serious flaws in the RF setup. Despite the setup of fitting all RF equipment in the nose being fine for a purely FPV aircraft, the additional noise generated by the 433 MHz telemetry module was causing severe interference on the 5.8 GHz FPV and 868 MHz RC channels. This was mitigated by further shielding the telemetry module (nothing some aluminium foil and duct tape can't fix!) and reconfiguring the component layout, moving the FPV transmitter to the tail and the RC receiver to the wingtip, with the bonus of the RC receiver antenna now able to be vertically polarised. These fixes eliminated all interference issues that arose from adding the telemetry module.

![ASW28_1](20220601_201509.jpg)
![ASW28_2](20220601_201438.jpg)
![ASW28_3](20220601_201354.jpg)
![ASW28_4](20220601_201334.jpg)

The two new features provided by Ardupilot that I was keen to test were telemetry control and autonomous soaring. Telemetry control worked well and as expected, nothing else to add. Autonomous soaring on the other hand needs some further investigation! In both FBWB and Auto modes, although SOAR_ALT_MIN and SOAR_ALT_CUTOFF are obeyed, the aircraft fails to respect either the minimum airspeed or glide cruise airspeed set points and will fall into a cycle of stalling until reaching SOAR_ALT_MIN. Some more work is needed to determine why this behaviour is happening.

Instead of soaring, longer flights using larger flight packs were carried out to observe the endurance performance. In wings-level cruise, the avionics plus stock powertrain (4018-1050Kv, 10x6 prop) uses approximately 2.5 A on 4S, for an efficiency of roughly 70 mAh/km. Removing VTX/telemetry power and improving the powertrain could help improve this figure, as well as re-tuning with TECS_SPDWEIGHT set to default (1).

{% include embed/youtube.html id='UKUrmTGnKI4' %}